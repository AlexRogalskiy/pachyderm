package pps

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
import "server/pfs/fuse/fuse.proto";

message StartJobRequest {
  Job job = 1;
}

message StartJobResponse {
    Transform transform = 1;
	repeated fuse.CommitMount commit_mounts = 2;
	// TODO this could just be another commit mount
    pfs.Commit output_commit = 3;
	uint64 index = 4;
}

message FinishJobRequest {
    Job job = 1;
	uint64 index = 2;
    bool success = 3;
}

service InternalJobAPI {
    rpc StartJob(StartJobRequest) returns (StartJobResponse) {}
    rpc FinishJob(FinishJobRequest) returns (google.protobuf.Empty) {}
}

