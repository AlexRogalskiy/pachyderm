syntax = "proto3";
package admin;

import "google/protobuf/empty.proto";

import "client/pfs/pfs.proto";
import "client/pps/pps.proto";
import "client/version/versionpb/version.proto";

message Op {
  versionpb.Version version = 1;
  pfs.PutObjectRequest object = 2;
  pfs.TagObjectRequest tag = 3;
  pfs.CreateRepoRequest repo = 4;
  pfs.BuildCommitRequest commit = 5;
  pfs.SetBranchRequest branch = 6;
  pps.CreatePipelineRequest pipeline = 7;
}

message ExtractRequest {}
message RestoreRequest {
    Op op = 1;
}

service API {
  rpc Extract(ExtractRequest) returns (stream Op) {}
  rpc Restore(stream RestoreRequest) returns (google.protobuf.Empty) {}
}
