{
  "pipeline": {
    "name": "train"
  },
  "transform": {
    "image": "tensor_flow_rnn",
    "cmd": [ "sh" ],
    "stdin": [
      "cd /code && python ptb_word_lm.py --data_path=/data/data --model=test --model_path_prefix=/data > /pfs/out/model-results",
      "cp /data/ptb.ckpt* /pfs/out",
      "cp /data/*.json /pfs/out"
    ]
  },
  "parallelism": "1",
  "inputs": [
    {
      "repo": {
        "name": "tensor_ptb_data"
      },
      "method": "global"
    }
  ]
}
{
  "pipeline": {
    "name": "generate"
  },
  "transform": {
    "image": "tensor_flow_rnn",
    "cmd": [ "sh" ],
    "stdin": [
      "ls /pfs/train > /pfs/out/input-data-provided",
      "sha256sum /pfs/train/ptb.ckpt > /pfs/out/ckpt-checksum",
      "cd /code && python ptb_word_lm.py --model=test --generate=true --model_path_prefix=/pfs/train/ > /pfs/out/generate-results" 
    ]
  },
  "parallelism": "1",
  "inputs": [
    {
      "repo": {
        "name": "train"
      },
      "method": "global"
    }
  ]
}
